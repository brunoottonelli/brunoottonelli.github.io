{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///home/bruno/Personal%20web%20page/src/app/zoer_proxy/%5B...path%5D/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\r\n\r\nconst POSTGREST_API_KEY = process.env.POSTGREST_API_KEY || \"\";\r\nconst NEXT_PUBLIC_ZOER_HOST = process.env.NEXT_PUBLIC_ZOER_HOST || \"https://zoer.ai\";\r\nconst proxy_path = 'zoer_proxy'\r\n\r\nexport async function GET(request: NextRequest) {\r\n  return handleRequest(request);\r\n}\r\n\r\nexport async function POST(request: NextRequest) {\r\n  return handleRequest(request);\r\n}\r\n\r\nexport async function PUT(request: NextRequest) {\r\n  return handleRequest(request);\r\n}\r\n\r\nexport async function DELETE(request: NextRequest) {\r\n  return handleRequest(request);\r\n}\r\n\r\nexport async function PATCH(request: NextRequest) {\r\n  return handleRequest(request);\r\n}\r\n\r\nasync function handleRequest(request: NextRequest) {\r\n  const url = request.nextUrl;\r\n  const pathSegments = url.pathname.replace(`/${proxy_path}`, \"\").split(\"/\").filter(Boolean);\r\n  try {\r\n    const targetPath = \"/\" + pathSegments.join(\"/\");\r\n\r\n    const targetUrl = `${NEXT_PUBLIC_ZOER_HOST}${targetPath}${url.search}`;\r\n\r\n    const headers = new Headers();\r\n\r\n    request.headers.forEach((value, key) => {\r\n      headers.set(key, value);\r\n    });\r\n\r\n\r\n    headers.set(\"x-zoer-auth\", `${POSTGREST_API_KEY}`);\r\n    headers.set(\"Postgrest-API-Key\", `${POSTGREST_API_KEY}`);\r\n    headers.delete(\"Authorization\");\r\n\r\n    const host = NEXT_PUBLIC_ZOER_HOST.split(\"://\")[1];\r\n    if (host) {\r\n      headers.set(\"Host\", host);\r\n    }\r\n\r\n    let body: BodyInit | undefined;\r\n    if ([\"POST\", \"PUT\", \"PATCH\"].includes(request.method)) {\r\n      body = await request.arrayBuffer();\r\n    }\r\n\r\n    const response = await fetch(targetUrl, {\r\n      method: request.method,\r\n      headers,\r\n      body,\r\n    });\r\n\r\n    const responseHeaders = new Headers();\r\n    response.headers.forEach((value, key) => {\r\n      responseHeaders.set(key, value);\r\n    });\r\n\r\n    return new NextResponse(response.body, {\r\n      status: response.status,\r\n      statusText: response.statusText,\r\n      headers: responseHeaders,\r\n    });\r\n  } catch (error) {\r\n    console.error(\"Proxy error:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Internal Server Error\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAAA;;AAEA,MAAM,oBAAoB,QAAQ,GAAG,CAAC,iBAAiB,IAAI;AAC3D,MAAM,wBAAwB,QAAQ,GAAG,CAAC,qBAAqB,IAAI;AACnE,MAAM,aAAa;AAEZ,eAAe,IAAI,OAAoB;IAC5C,OAAO,cAAc;AACvB;AAEO,eAAe,KAAK,OAAoB;IAC7C,OAAO,cAAc;AACvB;AAEO,eAAe,IAAI,OAAoB;IAC5C,OAAO,cAAc;AACvB;AAEO,eAAe,OAAO,OAAoB;IAC/C,OAAO,cAAc;AACvB;AAEO,eAAe,MAAM,OAAoB;IAC9C,OAAO,cAAc;AACvB;AAEA,eAAe,cAAc,OAAoB;IAC/C,MAAM,MAAM,QAAQ,OAAO;IAC3B,MAAM,eAAe,IAAI,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,YAAY,EAAE,IAAI,KAAK,CAAC,KAAK,MAAM,CAAC;IAClF,IAAI;QACF,MAAM,aAAa,MAAM,aAAa,IAAI,CAAC;QAE3C,MAAM,YAAY,GAAG,wBAAwB,aAAa,IAAI,MAAM,EAAE;QAEtE,MAAM,UAAU,IAAI;QAEpB,QAAQ,OAAO,CAAC,OAAO,CAAC,CAAC,OAAO;YAC9B,QAAQ,GAAG,CAAC,KAAK;QACnB;QAGA,QAAQ,GAAG,CAAC,eAAe,GAAG,mBAAmB;QACjD,QAAQ,GAAG,CAAC,qBAAqB,GAAG,mBAAmB;QACvD,QAAQ,MAAM,CAAC;QAEf,MAAM,OAAO,sBAAsB,KAAK,CAAC,MAAM,CAAC,EAAE;QAClD,IAAI,MAAM;YACR,QAAQ,GAAG,CAAC,QAAQ;QACtB;QAEA,IAAI;QACJ,IAAI;YAAC;YAAQ;YAAO;SAAQ,CAAC,QAAQ,CAAC,QAAQ,MAAM,GAAG;YACrD,OAAO,MAAM,QAAQ,WAAW;QAClC;QAEA,MAAM,WAAW,MAAM,MAAM,WAAW;YACtC,QAAQ,QAAQ,MAAM;YACtB;YACA;QACF;QAEA,MAAM,kBAAkB,IAAI;QAC5B,SAAS,OAAO,CAAC,OAAO,CAAC,CAAC,OAAO;YAC/B,gBAAgB,GAAG,CAAC,KAAK;QAC3B;QAEA,OAAO,IAAI,+PAAA,CAAA,eAAY,CAAC,SAAS,IAAI,EAAE;YACrC,QAAQ,SAAS,MAAM;YACvB,YAAY,SAAS,UAAU;YAC/B,SAAS;QACX;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gBAAgB;QAC9B,OAAO,+PAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}